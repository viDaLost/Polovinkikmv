Готово — вставил ваш новый REVIEWS_API. Скопируйте файл целиком:

<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Половинки</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Cormorant+Garamond:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f6f1eb;
      --fg:#3e2c23;
      --muted:#6b5646;
      --accent:#d8b899;
      --accent-2:#c49f7a;
      --panel:#fff9f3;
      --footer:#ede2d7;
      --ring:rgba(212, 175, 150, .45);
    }

    * { box-sizing: border-box; }
    html, body { scroll-behavior: smooth; }

    body {
      margin: 0;
      font-family: 'Cormorant Garamond', serif;
      background-color: var(--bg);
      color: var(--fg);
      line-height: 1.6;
      text-align: center;
      overflow-x: hidden;
    }

    h1 {
      font-size: 2.8rem;
      margin-bottom: 0.3em;
      font-weight: 600;
      font-family: 'Playfair Display', serif;
    }

    h2 {
      font-size: 1.3rem;
      font-weight: 400;
      margin-bottom: 1.5em;
      color: var(--muted);
    }

    p {
      max-width: 650px;
      margin: 0 auto 1em;
      font-size: 1.1rem;
    }

    section {
      padding: 3em 1.5em;
    }

    .logo {
      max-width: 800px;
      height: auto;
      margin-bottom: 1em;
    }

    @media (max-width: 800px) and (orientation: portrait) { .logo { max-width: 220px; } }
    @media (max-width: 1024px) and (orientation: landscape) { .logo { max-width: 220px; } }
    @media (min-width: 1024px) { .logo { max-width: 220px; } }

    .btn {
      display: inline-block;
      padding: 0.9em 2em;
      margin-top: 1.0em;
      background-color: var(--accent);
      color: white;
      font-size: 1rem;
      border-radius: 30px;
      text-decoration: none;
      font-weight: 500;
      transition: background 0.3s ease, transform .1s ease;
    }
    .btn:hover { background-color: var(--accent-2); }
    .btn:active { transform: translateY(1px); }

    .btn-outline {
      background: transparent;
      color: var(--fg);
      border: 1px solid var(--accent);
    }
    .btn-outline:hover { background: var(--panel); }

    footer {
      padding: 2em 1em;
      background-color: var(--footer);
      font-size: 0.9rem;
      color: #5a4a3a;
    }
    footer p { margin: 0.3em 0; }

    /* Элегантный разделитель с анимацией */
    .divider {
      width: 60px;
      height: 2px;
      margin: 40px auto;
      background-color: var(--accent);
      border-radius: 1px;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.8s ease-out;
    }
    .divider.visible { opacity: 1; transform: translateY(0); }

    /* Анимация появления секций */
    .fade-in {
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.8s ease-out;
    }
    .fade-in.visible { opacity: 1; transform: translateY(0); }

    /* ======= ФОРМА ЗАКАЗА ======= */
    .card {
      max-width: 760px;
      margin: 0 auto;
      background: var(--panel);
      border-radius: 18px;
      padding: 1.25em;
      box-shadow: 0 10px 30px rgba(62,44,35,.08);
      text-align: left;
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
    }
    @media (max-width:720px){ .grid { grid-template-columns: 1fr; } }

    label {
      display: block;
      font-size: 0.95rem;
      color: var(--muted);
      margin-bottom: 6px;
    }

    input, select, textarea {
      width: 100%;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid rgba(0,0,0,.06);
      background: #fff;
      font-size: 1rem;
      font-family: inherit;
      outline: none;
      transition: box-shadow .2s ease, border-color .2s ease;
    }
    input:focus, select:focus, textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 4px var(--ring);
    }

    .row { margin-bottom: 12px; }

    .muted {
      color: var(--muted);
      font-size: .95rem;
    }

    .summary {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #fff;
      border: 1px dashed rgba(0,0,0,.12);
      padding: 14px 16px;
      border-radius: 12px;
      margin-top: 8px;
      font-size: 1.05rem;
    }

    .actions {
      display: flex; gap: 12px; flex-wrap: wrap; margin-top: 12px;
    }

    .note {
      font-size: .95rem;
      color: var(--muted);
      margin-top: 8px;
    }

    /* ==== ДОБАВЛЕНО для отзывов ==== */
    #stars span { padding: 0 3px; transition: transform .1s ease; cursor:pointer; font-size:22px; }
    #stars span:hover { transform: scale(1.15); }
    .review-item { border-bottom: 1px solid rgba(0,0,0,.06); padding: 12px 0; }
    .review-item:last-child { border-bottom: 0; }
    .review-head { display:flex; justify-content:space-between; gap:8px; align-items:center; }
    .review-name { font-weight:600; }
    .review-date { color: var(--muted); font-size:.9rem; }
    .review-text { margin-top:6px; white-space:pre-wrap; }
    .review-stars { font-size:18px; }
    .review-del { background:transparent; border:1px solid rgba(0,0,0,.12); padding:6px 10px; border-radius:10px; cursor:pointer; }
    .review-del:hover { background:#fff; }
  </style>
</head>
<body>

  <!-- Главный экран -->
  <section class="fade-in">
    <img src="logo.png" alt="Логотип Половинки" class="logo">
    <h1>Половинки</h1>
    <h2>Домашняя кондитерская</h2>
    <p><em>Орешки — десерт, в котором встречаются вкус и воспоминания</em></p>
    <p>Нежное тесто, золотистая выпечка и тягучая начинка из вареной сгущёнки, с добавлением грецких орехов.
    Каждый орешек — это маленькая история радости, которую хочется разделить на двоих.</p>

    <a href="#order" class="btn" aria-label="Перейти к оформлению заказа">Сделать заказ</a>
  </section>

  <div class="divider"></div>

  <!-- Описание десерта -->
  <section class="fade-in">
    <p>Мы готовим только одно лакомство, доведённое до совершенства — орешки.</p>
    <p>В каждом — баланс хрустящей скорлупки и нежной начинки.</p>
    <p>Это десерт, который возвращает к детству, но в новом, изысканном звучании.</p>
  </section>

  <div class="divider"></div>

  <!-- Форма заказа -->
  <section id="order" class="fade-in" aria-labelledby="order-title">
    <h1 id="order-title" style="margin-bottom:.2em;">Оформление заказа</h1>
    <p class="muted" style="margin-bottom:1.2em;">
      Товар: <strong>Коробочка орешков (6 шт)</strong> — <strong>170 ₽ за коробку</strong>
    </p>

    <div class="card" role="region" aria-label="Форма заказа">
      <form id="order-form" action="https://formspree.io/f/xgvleerr" method="POST" autocomplete="on" novalidate>
        <div class="grid">
          <div class="row">
            <label for="name">Имя и фамилия*</label>
            <input id="name" name="name" required>
          </div>

          <div class="row">
            <label for="phone">Телефон для связи*</label>
            <input id="phone" name="phone" inputmode="tel" required placeholder="+7 999 123-45-67" pattern="^[\\d\\+\\-\\s\\(\\)]{7,}$">
          </div>

          <div class="row">
            <label for="social">Соцсети (WhatsApp/Telegram)</label>
            <input id="social" name="social" placeholder="+7 999 123-45-67 или @username">
          </div>

          <div class="row">
            <label for="qty">Количество коробочек*</label>
            <select id="qty" name="qty" required>
              <option value="1" selected>1 коробка — 6 шт</option>
              <option value="2">2 коробки — 12 шт</option>
              <option value="3">3 коробки — 18 шт</option>
              <option value="4">4 коробки — 24 шт</option>
              <option value="5">5 коробок — 30 шт</option>
            </select>
          </div>

          <div class="row">
            <label for="date">Желаемая дата получения*</label>
            <input type="date" id="date" name="date" required>
          </div>

          <div class="row">
            <label for="time">Время (ориентир)</label>
            <input type="time" id="time" name="time">
          </div>

          <div class="row">
            <label for="method">Способ получения ( Если заказ меньше  15 упаковок орешков, то доставка платная)</label>
            <select id="method" name="method">
              <option value="pickup" selected>Самовывоз</option>
              <option value="delivery">Доставка</option>
            </select>
          </div>

          <div class="row" id="address-row" style="display:none;">
            <label for="address">Адрес доставки</label>
            <input id="address" name="address" placeholder="Город, улица, дом, подъезд">
          </div>

          <div class="row" style="grid-column: 1 / -1;">
            <label for="comment">Комментарий к заказу</label>
            <textarea id="comment" name="comment" rows="3" placeholder="Пожелания по времени, подписать открытку и т.д."></textarea>
          </div>
        </div>

        <div class="summary" aria-live="polite">
          <span>Итого: <strong id="total-text">170 ₽</strong></span>
          <span class="muted">170 ₽ × <span id="qty-text">1</span> короб.</span>
        </div>

        <div class="actions">
          <button id="submit-btn" type="submit" class="btn">Отправить заказ</button>
        </div>

        <p id="form-status" class="note" style="display:none;"></p>
      </form>
    </div>
  </section>

  <div class="divider"></div>
  <div class="divider"></div>

  <!-- === ДОБАВЛЕНО: Раздел ОТЗЫВЫ === -->
  <section id="reviews" class="fade-in" aria-labelledby="reviews-title">
    <h1 id="reviews-title" style="margin-bottom:.2em;">Отзывы</h1>
    <p class="muted" style="margin-bottom:1.2em;">Оставьте пару слов — нам это очень ценно.</p>

    <!-- Список отзывов -->
    <div id="reviews-list" class="card" style="margin-bottom:14px;">
      <div class="muted">Загружаем отзывы...</div>
    </div>

    <!-- Форма добавления -->
    <div class="card" role="region" aria-label="Форма отзыва">
      <form id="review-form" autocomplete="on">
        <div class="row">
          <label for="r-name">Имя (необязательно)</label>
          <input id="r-name" name="name" placeholder="Ваше имя">
        </div>

        <div class="row">
          <label>Оценка</label>
          <div id="stars" aria-label="Рейтинг 1–5">
            <span data-s="1">☆</span><span data-s="2">☆</span><span data-s="3">☆</span><span data-s="4">☆</span><span data-s="5">☆</span>
          </div>
        </div>

        <div class="row">
          <label for="r-text">Отзыв*</label>
          <textarea id="r-text" name="text" rows="3" placeholder="Что вам понравилось? Что можно улучшить?" required></textarea>
        </div>

        <div class="actions">
          <button type="submit" class="btn">Отправить отзыв</button>
          <button type="button" id="admin-btn" class="btn btn-outline" title="Режим админа (удаление)">Я админ</button>
        </div>
        <p id="r-status" class="note" style="display:none;"></p>
      </form>
    </div>
  </section>

  <div class="divider"></div>

  <!-- Контакты -->
  <section class="fade-in" aria-labelledby="contacts-title">
    <h1 id="contacts-title" style="margin-bottom:.6em;">Контакты</h1>
    <div class="actions" style="justify-content:center;">
      <a class="btn" href="tel:+79633883334" aria-label="Позвонить нам">Наш телефон</a>
      <a class="btn btn-outline" href="https://t.me/kamill_lli" target="_blank" rel="noopener" aria-label="Открыть наш Telegram">Наш Telegram</a>
    </div>
  </section>

  <!-- Футер -->
  <footer class="fade-in">
    <p><strong>Половинки</strong> — домашняя кондитерская</p>
    <p>Каждый орешек — это момент, которым хочется поделиться</p>
  </footer>

  <script>
    // Анимации появления
    const faders = document.querySelectorAll('.fade-in');
    const dividers = document.querySelectorAll('.divider');
    const appearOptions = { threshold: 0.2, rootMargin: "0px 0px -50px 0px" };
    const appearOnScroll = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (!entry.isIntersecting) return;
        entry.target.classList.add("visible");
        observer.unobserve(entry.target);
      });
    }, appearOptions);
    faders.forEach(fader => appearOnScroll.observe(fader));
    dividers.forEach(divider => appearOnScroll.observe(divider));

    // ===== Логика формы заказа =====
    const PRICE_PER_BOX = 170; // ₽ за коробку (6 шт)
    const qtyEl = document.getElementById('qty');
    const totalTextEl = document.getElementById('total-text');
    const qtyTextEl = document.getElementById('qty-text');
    const methodEl = document.getElementById('method');
    const addressRow = document.getElementById('address-row');
    const form = document.getElementById('order-form');
    const statusEl = document.getElementById('form-status');
    const submitBtn = document.getElementById('submit-btn');

    function formatRUB(v){
      try { return new Intl.NumberFormat('ru-RU', { style:'currency', currency:'RUB', maximumFractionDigits:0 }).format(v); }
      catch { return v.toFixed(0) + ' ₽'; }
    }

    function updateSummary(){
      const qty = parseInt(qtyEl.value, 10) || 1;
      const total = qty * PRICE_PER_BOX;
      totalTextEl.textContent = formatRUB(total);
      qtyTextEl.textContent = String(qty);
    }

    qtyEl.addEventListener('change', updateSummary);
    updateSummary();

    methodEl.addEventListener('change', () => {
      addressRow.style.display = methodEl.value === 'delivery' ? '' : 'none';
    });

    // Отправка через Formspree без перезагрузки
    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const name = document.getElementById('name').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const social = document.getElementById('social').value.trim();
      const qty = parseInt(qtyEl.value, 10) || 1;
      const date = document.getElementById('date').value;
      const time = document.getElementById('time').value;
      const method = methodEl.value;
      const address = (document.getElementById('address').value || '').trim();
      const comment = (document.getElementById('comment').value || '').trim();

      if(!name || !phone || !date){
        alert('Пожалуйста, заполните имя, телефон и дату получения.');
        return;
      }
      if(method === 'delivery' && !address){
        alert('Укажите адрес доставки.');
        return;
      }

      const total = qty * PRICE_PER_BOX;

      const payload = {
        product: 'Коробочка орешков (6 шт)',
        unit_price: PRICE_PER_BOX + ' ₽',
        quantity: qty,
        total: total + ' ₽',
        date,
        time,
        method: method === 'pickup' ? 'Самовывоз' : 'Доставка',
        address: method === 'delivery' ? address : '',
        name,
        phone,
        social,
        comment
      };

      // UI: блокируем кнопку, показываем статус
      submitBtn.disabled = true;
      submitBtn.textContent = 'Отправляем...';
      statusEl.style.display = 'block';
      statusEl.textContent = 'Отправляем заказ...';

      try {
        const resp = await fetch('https://formspree.io/f/xgvleerr', {
          method: 'POST',
          headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(payload)
        });

        if (resp.ok) {
          form.reset();
          updateSummary();
          addressRow.style.display = 'none';
          statusEl.innerHTML = 'Спасибо за заказ! Мы с вами свяжемся через ваши соцсети или по номеру телефона для оплаты заказа или для его подтверждения.';
        } else {
          statusEl.textContent = 'Не удалось отправить заказ. Попробуйте ещё раз или свяжитесь с нами по телефону/в Telegram.';
        }
      } catch (err) {
        console.error(err);
        statusEl.textContent = 'Сеть недоступна. Проверьте соединение и попробуйте снова.';
      } finally {
        submitBtn.disabled = false;
        submitBtn.textContent = 'Отправить заказ';
      }
    });
  </script>

  <!-- === ДОБАВЛЕНО: JS для отзывов === -->
  <script>
    const REVIEWS_API = 'https://script.google.com/macros/s/AKfycbxBpZgwJFDyRLpUhccCIKXn-BtQbYy9F-9pYTBGyFrAvWlLVCDdZhZv-Ck6dB5gNLPYLA/exec';

    function starsToText(n){ n = Math.max(1, Math.min(5, Number(n)||5)); return '★'.repeat(n) + '☆'.repeat(5-n); }
    function formatDateTime(d){ try{ return new Date(d).toLocaleString('ru-RU',{dateStyle:'medium', timeStyle:'short'}); }catch{ return d; } }
    function escapeHtml(s){ return (s||'').toString().replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;'); }

    let ADMIN_MODE = false;
    let ADMIN_KEY  = null;

    async function loadReviews(){
      const list = document.getElementById('reviews-list');
      if (!list) return;
      list.innerHTML = '<div class="muted">Загружаем отзывы...</div>';
      try{
        const r = await fetch(REVIEWS_API + '?action=list');
        const data = await r.json();
        if (!data.ok) throw new Error(data.error || 'Ошибка');
        if (!data.reviews.length){ list.innerHTML = '<div class="muted">Отзывов пока нет. Будьте первым!</div>'; return; }
        list.innerHTML = '';
        data.reviews.forEach(it=>{
          const div = document.createElement('div');
          div.className = 'review-item';
          div.innerHTML = `
            <div class="review-head">
              <div>
                <div class="review-name">${escapeHtml(it.name || 'Гость')}</div>
                <div class="review-date">${formatDateTime(it.createdAt)}</div>
              </div>
              <div class="review-stars" title="${it.rating || 5}">${starsToText(it.rating)}</div>
            </div>
            <div class="review-text">${escapeHtml(it.text || '')}</div>
            ${ADMIN_MODE ? `<div style="margin-top:8px;"><button class="review-del" data-id="${it.id}">Удалить</button></div>` : ''}
          `;
          list.appendChild(div);
        });
        if (ADMIN_MODE){
          list.querySelectorAll('.review-del').forEach(btn=>{
            btn.addEventListener('click', ()=> deleteReview(btn.getAttribute('data-id')));
          });
        }
      }catch(e){
        console.error(e);
        list.innerHTML = '<div class="muted">Не удалось загрузить отзывы.</div>';
      }
    }

    (function initReviewForm(){
      const form = document.getElementById('review-form');
      if (!form) return;
      const status = document.getElementById('r-status');
      const stars = document.querySelectorAll('#stars span');
      let rating = 5;
      function paint(n){ stars.forEach((el,i)=> el.textContent = (i < n) ? '★' : '☆'); }
      stars.forEach(el=> el.addEventListener('click', ()=>{ rating = Number(el.dataset.s); paint(rating); }));
      paint(rating);

      form.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const name = document.getElementById('r-name').value.trim();
        const text = document.getElementById('r-text').value.trim();
        if (!text) { alert('Напишите текст отзыва.'); return; }

        status.style.display='block'; status.textContent='Отправляем...';
        try{
          const resp = await fetch(REVIEWS_API, {
            method:'POST',
            headers:{ 'Content-Type':'text/plain' }, // без preflight
            body: JSON.stringify({ action:'add', name, rating, text })
          });
          const data = await resp.json();
          if (!data.ok) throw new Error(data.error || 'Ошибка отправки');

          form.reset(); rating = 5; paint(rating);
          status.textContent='Спасибо! Ваш отзыв добавлен.';
          loadReviews();
        }catch(err){
          console.error(err);
          status.textContent='Не удалось отправить. Попробуйте позже.';
        } finally {
          setTimeout(()=>{ status.style.display='none'; }, 3000);
        }
      });

      // Режим админа (введите ваш ADMIN_KEY, заданный в Apps Script)
      document.getElementById('admin-btn').addEventListener('click', ()=>{
        const key = prompt('Введите админ-ключ для удаления:');
        if (!key) return;
        ADMIN_KEY = key; ADMIN_MODE = true;
        loadReviews();
        alert('Режим админа включён: под отзывами появятся кнопки «Удалить».');
      });
    })();

    async function deleteReview(id){
      if (!ADMIN_MODE || !ADMIN_KEY) return;
      if (!confirm('Удалить этот отзыв?')) return;
      try{
        const resp = await fetch(REVIEWS_API, {
          method:'POST',
          headers:{ 'Content-Type':'text/plain' },
          body: JSON.stringify({ action:'delete', id, adminKey: ADMIN_KEY })
        });
        const data = await resp.json();
        if (!data.ok) throw new Error(data.error || 'Ошибка удаления');
        loadReviews();
      }catch(e){ alert('Не удалось удалить: ' + e.message); }
    }

    document.addEventListener('DOMContentLoaded', loadReviews);
  </script>

</body>
</html>
